{"version":3,"sources":["../../../src/components/flickity/flickity.directive.ts"],"names":[],"mappings":"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","file":"flickity.directive.js","sourceRoot":"","sourcesContent":["declare let require: any;\n\nimport {\n  ElementRef, Directive, OnDestroy, Input, Output, EventEmitter, AfterContentInit\n} from '@angular/core';\n\nimport { FlickityOptions } from \"../../interfaces/flickity-options.interface\";\nimport { AppConfigService } from '../../services/app-config.service';\n\n\nexport class FlickityDirective implements AfterContentInit, OnDestroy {\n\n   config: FlickityOptions = {};\n   slideSelect = new EventEmitter<number>();\n   cellStaticClick = new EventEmitter<number>();\n   childrenUpdated = new EventEmitter<void>();\n\n  private flkty: any;\n  private appendElements: HTMLElement[] = [];\n  private childrenUpdate;\n  private childrenUpdateInterval = 300;\n\n  constructor(private el: ElementRef,\n              private appConfigService: AppConfigService) {}\n\n  ngAfterContentInit(): void {\n    this.init();\n  }\n\n  ngOnDestroy(): void {\n    this.destroy();\n  }\n\n  init() {\n    if (this.appConfigService.isPlatformServer()) {\n      return;\n    }\n\n    const Flickity = require('flickity');\n\n    let config = this.config;\n\n    if (this.flkty) {\n      config['initialIndex'] = this.flkty.selectedIndex;\n      this.destroy();\n    }\n\n    this.flkty = new Flickity(this.el.nativeElement, config);\n\n    this.flkty.on('select', () => {\n      this.slideSelect.emit(this.selectedIndex);\n    });\n\n    this.flkty.on('staticClick', (_event: any, _pointer: any, _cellElement: any, cellIndex: any) => {\n      this.cellStaticClick.emit(cellIndex);\n    });\n\n    this.childrenUpdate = setInterval(() => this.updateElements(), this.childrenUpdateInterval);\n  }\n\n  destroy() {\n    if (!this.flkty) {\n      return;\n    }\n\n    if (this.childrenUpdate) {\n      clearInterval(this.childrenUpdate);\n      this.childrenUpdate = undefined;\n    }\n\n    this.flkty.destroy();\n  }\n\n  resize() {\n    if (!this.flkty) {\n      return;\n    }\n\n    this.flkty.resize();\n  }\n\n  reposition() {\n    if (!this.flkty) {\n      return;\n    }\n\n    this.flkty.reposition();\n  }\n\n  previous() {\n    if (!this.flkty) {\n      return;\n    }\n\n    this.flkty.previous();\n  }\n\n  previousAvailable(): boolean {\n    if (this.selectedIndex === undefined) {\n      return false;\n    }\n\n    return this.selectedIndex > 0;\n  }\n\n  next() {\n    if (!this.flkty) {\n      return;\n    }\n\n    this.flkty.next();\n  }\n\n  nextAvailable(): boolean {\n    if (this.selectedIndex === undefined || !this.slides) {\n      return false;\n    }\n\n    return this.selectedIndex < this.slides - 1;\n  }\n\n  get selectedIndex(): number {\n    if (!this.flkty) {\n      return;\n    }\n\n    return this.flkty.selectedIndex;\n  }\n\n  get cells(): number {\n    if (!this.flkty) {\n      return;\n    }\n\n    return this.flkty.cells.length;\n  }\n\n  get slides(): number {\n    if (!this.flkty) {\n      return;\n    }\n\n    return this.flkty['slides'].length;\n  }\n\n  append(el: HTMLElement) {\n    this.appendElements.push(el);\n  }\n\n  prepend(el: HTMLElement) {\n    this.flkty.prepend(el);\n  }\n\n  private updateElements() {\n    if (!this.flkty || this.appendElements.length == 0) {\n      return;\n    }\n\n    this.appendElements.forEach(el => this.flkty.append(el));\n    this.appendElements = [];\n\n    this.resize();\n    this.childrenUpdated.emit();\n  }\nstatic decorators: DecoratorInvocation[] = [\n{ type: Directive, args: [{ selector: '[flickity]' }, ] },\n];\n/** @nocollapse */\nstatic ctorParameters: () => ({type: any, decorators?: DecoratorInvocation[]}|null)[] = () => [\n{type: ElementRef, },\n{type: AppConfigService, },\n];\nstatic propDecorators: {[key: string]: DecoratorInvocation[]} = {\n'config': [{ type: Input, args: ['flickity', ] },],\n'slideSelect': [{ type: Output },],\n'cellStaticClick': [{ type: Output },],\n'childrenUpdated': [{ type: Output },],\n};\n}\n\ninterface DecoratorInvocation {\n  type: Function;\n  args?: any[];\n}\n"]}